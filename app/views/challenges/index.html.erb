<%= turbo_frame_tag :dashboard do %>
  <div data-controller="navigation">
    <%= render 'dashboard/partials/navigation' %>

    <main class="bg-gray-50 dark:bg-gray-900 h-screen" data-navigation-target="challengesFrame">
      <div class="container px-4 pt-24 mx-auto md:pt-32 lg:px-0 dark:bg-gray-900">
        <h1 class="mb-3 text-3xl font-bold text-gray-900 sm:text-4xl sm:leading-none sm:tracking-tight dark:text-white">Active challenges</h1>
        <section class="grid grid-cols-1 space-y-12 md:space-y-0 md:grid-cols-2 lg:grid-cols-3 md:gap-x-6 md:gap-6 pt-9 mb-5">
          <% @challenges.each do |challenge| %>
            <%= link_to challenge_path(challenge) do %>
              <div class="flex flex-col max-w-lg p-6 mx-auto text-gray-900 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 xl:p-8 dark:bg-gray-800 dark:text-white">
                <h3 class="mb-4 text-2xl font-semibold"><%= challenge.title %></h3>
                <p class="font-light text-gray-500 sm:text-lg dark:text-gray-400"><%= l(challenge.starts_at.to_date, format: :long) %> - <%= l(challenge.ends_at.to_date, format: :long) %></p>
                <div class="flex items-baseline my-8">
                  <span class="mr-2 text-5xl font-extrabold"><%= challenge.challenge_users.count %></span>
                  <span class="text-gray-500 dark:text-gray-400">participants</span>
                </div>
                <!-- List -->
                <ul role="list" class="mb-8 space-y-4 text-left">
                  <li class="flex items-center space-x-3">
                    <svg class="flex-shrink-0 w-5 h-5 text-green-500 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                    <span><%= challenge.challenge_type.capitalize %> challenge</span>
                  </li>
                  <% if challenge.joined %>
                    <li class="flex items-center space-x-3">
                      <svg class="flex-shrink-0 w-5 h-5 text-green-500 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                      <span>Joined</span>
                    </li>
                  <% end %>
                </ul>
              </div>
            <% end %>
          <% end %>
        </section>
      </div>

    </main>
  </div>
<% end %>
